<!doctype html>
<html lang="en">
<head>
    <title>Edge Linking through Hough Transform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-100 to-white min-h-screen text-gray-800 font-sans">
    <div class="max-w-7xl mx-auto px-4 py-8">
        <h1 class="text-5xl font-extrabold text-center text-indigo-800 mb-6 drop-shadow-md">Edge Linking through Hough Transform</h1>

        {% if demo %}
        <p class="text-center text-lg text-gray-700 mb-12 max-w-3xl mx-auto">
            Explore edge linking with the Hough Transform. Below are demo images showcasing its capabilities. Upload your own image and tweak the parameters to see custom results.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-10 mb-12">
            {% for i in range(1, 4) %}
            <div class="bg-white shadow-lg rounded-xl p-4 hover:shadow-2xl transition duration-300">
                <h3 class="text-center text-lg font-semibold text-indigo-700 mb-2">Demo Input {{ i }}</h3>
                <img src="{{ url_for('static', filename='images/input' + i|string + '.jpg') }}" class="w-full rounded mb-2">
                <div class="grid grid-cols-2 gap-2">
                    <img src="{{ url_for('static', filename='images/output' + i|string + 'a.jpg') }}" class="rounded">
                    <img src="{{ url_for('static', filename='images/output' + i|string + 'b.jpg') }}" class="rounded">
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center">
            <a href="/upload" class="bg-indigo-600 text-white text-lg px-6 py-3 rounded-full hover:bg-indigo-700 shadow-md transition">Input Image</a>
        </div>
        {% else %}

        <form method="POST" action="/upload" enctype="multipart/form-data" class="bg-white shadow-2xl rounded-xl p-8 max-w-2xl mx-auto">
            <h2 class="text-2xl font-bold text-center text-indigo-700 mb-6">Upload Your Image & Customize Parameters</h2>

            <label class="block mb-2 font-semibold">Select Image:</label>
            <input type="file" name="image" class="w-full mb-4 p-2 border rounded" required>

            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block font-semibold">Divisions:</label>
                    <input type="number" name="divisions" value="180" min="1" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block font-semibold">Max Lines:</label>
                    <input type="number" name="max_lines" value="100" min="1" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block font-semibold">Frequency Threshold:</label>
                    <input type="number" name="freq_threshold" value="0" min="0" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block font-semibold">Rho Threshold:</label>
                    <input type="number" name="rho_thresh" value="20" min="0" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block font-semibold">Theta Threshold (radians):</label>
                    <input type="number" step="0.0001" name="theta_thresh" value="0.0349" min="0" class="w-full p-2 border rounded">
                </div>
                <div>
                    <label class="block font-semibold">Max Gap:</label>
                    <input type="number" name="max_gap" value="5" min="0" class="w-full p-2 border rounded">
                </div>
            </div>

            <div class="flex justify-between mt-6">
                <a href="/back" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">Back</a>
                <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Submit</button>
            </div>
        </form>

        {% endif %}
    </div>
</body>
</html>
